import { HTMLSkeleton, H1 } from "./_jsx/global.jsx"

export const snippet_title = "Get All Active Montages from UAnimInstance in Unreal Engine 5 C++"
export const snippet_category = "Unreal Engine 5 C++"

<HTMLSkeleton RegisterToSiteGuide={{ category : snippet_category, title : snippet_title }}>

<H1>{snippet_title}</H1>

```cpp
UCLASS()
class TESTING_API UMyBFL : public UBlueprintFunctionLibrary {
    GENERATED_BODY()

   public:
    UFUNCTION(BlueprintCallable)
    static TArray<UAnimMontage*> GetActiveMontages(UAnimInstance* AnimInstance) {
        TArray<UAnimMontage*> ActiveMontages;

        // Return if Anim Instance is invalid
        if (!IsValid(AnimInstance)) {
            return ActiveMontages;
        }

        // Iterate and get all active montages
        for (auto& MontageInstance : AnimInstance->MontageInstances) {
            if (MontageInstance && MontageInstance->Montage && MontageInstance->IsActive()) {
                ActiveMontages.Add(MontageInstance->Montage);
            }
        }

        return ActiveMontages;
    }
};
```
</HTMLSkeleton>